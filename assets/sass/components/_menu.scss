// ************************************************************************** //
// *
// *    Menu components.
// *
// ************************************************************************** //

@use './../abstracts/mixins/flex';
@use './../abstracts/mixins/sizes';
@use './../abstracts/mixins/banner';
@use './../abstracts/mixins/spaces';
@use './../abstracts/mixins/position';
@use './../abstracts/mixins/transition';

$_component: 'menu';
$_classname: '#{$prefix}#{$_component}';

@include banner.header('Component #{$_component}');



// * =============================================
// *
// *    Component Properties
// *
// * =============================================

// * Default layout variables
// * =========================

$accordion--border-radius: 'small' !default;
$accordion--border-width: 1px !default;


// * Default theme variables
// * =========================

$menu--background-color              : $white;
$menu--border-color                  : $gray-500;



$submenu--background-color           : $white;

$menu-link--text-color               : $black;
$menu-link--background-color         : transparent;

$menu-link--hover-text-color         : $black;
$menu-link--hover-background-color   : $gray-200;

$menu-link--active-text-color        : $black;
$menu-link--active-background-color  : $gray-300;

$menu-link--disabled-text-color      : $gray-500;
$menu-link--disabled-background-color: transparent;


// * =============================================
// *
// *    Component Definition
// *
// * =============================================

.#{$_classname} {
    
    border-width: $accordion--border-width;
    border-style: solid;
    border-color: var(--menu--border-color, $menu--border-color);
    border-radius: map-get($radius, $accordion--border-radius);
    background-color: var(--menu--background-color, $menu--background-color);


    // Items
    // --

    &-items {
        @include flex.row;
        @include spaces.margin(0,0,0,0);
        flex-wrap: wrap;

    }

    &-vertical &-items {
        @include flex.column;
    }

    @each $pos in (center, start, end)
    {
        &-#{$pos} &-items {
            justify-content: #{$pos} !important;
        }
    }
    &-fill &-items {
        justify-content: space-around !important;
    }
    &-fill &-item {
        flex-grow: 1;
        // justify-self: center;
        text-align: center;
    }

    
    // Item
    // --

    &-item {
        // border: 3px solid pink;
        @include position.relative;
    }

    
    // Link
    // --

    &-link {
        @include transition.set((color, background-color), map-get($delays, normal));
        padding: map-get($spacers, 2) map-get($spacers, 3);
        display: block;
        cursor: pointer;

        background-color: var(--menu-link--background-color, $menu-link--background-color);
        color: var(--menu-link--text-color, $menu-link--text-color);

        &.active,
        &.active:hover {
            background-color: var(--menu-link--active-background-color, $menu-link--active-background-color);
            color: var(--menu-link--active-text-color, $menu-link--active-text-color);
        }
        &:hover {
            background-color: var(--menu-link--hover-background-color, $menu-link--hover-background-color);
            color: var(--menu-link--hover-text-color, $menu-link--hover-text-color);
        }

        &[disabled],
        &[disabled]:hover {
            background-color: var(--menu-link--disabled-background-color, $menu-link--disabled-background-color);
            color: var(--menu-link--disabled-text-color, $menu-link--disabled-text-color);
            cursor: default !important;
        }
    }
}


// Sub Menu
.with-submenu {

    & > .menu-link {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        &::after {
            content: "";
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid #2f2f2f;
            font-size: 0;
            line-height: 0;
            margin-left: map-get($spacers, 2);
        }
    }

    // & > ul {
    & > .menu-items {
        @include position.absolute(100%, 0, 0, 0);
        display: none;
        height: fit-content;

        box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
        background-color: var(--submenu--background-color, $submenu--background-color);
        z-index: 1000;
    }
    // & > ul & > ul {
    & > .menu-items & > .menu-items {
        @include position.left(100%);
        @include position.top(0);
        @include sizes.width(100%);
    }

    &:hover > ul {
        display: inline;
    }
}