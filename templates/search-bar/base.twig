
<div class="{{ classname('search') }}">
    <form method="get" rel="js-ux-search">
        <input type="search"  placeholder="Rechercher..." autocomplete="off" aria-label="search">
        <button type="submit">Rechercher</button>
    </form>
    <ul id="autocomplete-list"></ul>
</div>

<script>
    // script.js
document.addEventListener('DOMContentLoaded', () => {
    const searchBar = document.querySelector('[rel=js-ux-search] > input');
    const autocompleteList = document.getElementById('autocomplete-list');
    const suggestions = ['Apple', 'Banana', 'Orange', 'Strawberry', 'Mango', 'Grapes', 'Pineapple'];

    // Gestion des raccourcis clavier pour activer la barre de recherche
    document.addEventListener('keydown', (event) => {
        let isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;

        if (isMac && event.metaKey && event.key === 'K' || 
            !isMac && event.ctrlKey && event.key === 'K') {
            event.preventDefault();
            searchBar.focus();
        }
    });

    // Autocomplétion
    searchBar.addEventListener('input', function () {
        const query = this.value.toLowerCase();
        autocompleteList.innerHTML = '';

        if (query) {
            const filteredSuggestions = suggestions.filter(item => item.toLowerCase().startsWith(query));
            if (filteredSuggestions.length > 0) {
                autocompleteList.style.display = 'block';
                filteredSuggestions.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    li.addEventListener('click', function () {
                        searchBar.value = this.textContent;
                        autocompleteList.style.display = 'none';
                    });
                    autocompleteList.appendChild(li);
                });
            } else {
                autocompleteList.style.display = 'none';
            }
        } else {
            autocompleteList.style.display = 'none';
        }
    });

    // Cacher la liste d'autocomplétion quand on clique ailleurs
    document.addEventListener('click', function (e) {
        if (e.target !== searchBar) {
            autocompleteList.style.display = 'none';
        }
    });
});

</script>